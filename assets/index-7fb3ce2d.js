(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();const R=[{name:"the finals",src:"./assets/the_finals.jpg"},{name:"mario kart 8",src:"./assets/mario_kart_8.jpg"},{name:"warzone",src:"./assets/warzone.jpg"},{name:"final fantasy VII",src:"./assets/ff7.jpg"},{name:"project cars 3",src:"./assets/project_cars_3.jpg"},{name:"Doom Eternal",src:"./assets/doom_eternal.jpg"},{name:"sonic",src:"./assets/sonic.jpg"},{name:"battlefield 3",src:"./assets/bf3.jpg"},{name:"Fc 24",src:"./assets/fc24.jpg"},{name:"celeste",src:"./assets/celeste.jpg"},{name:"Red Dead Redemption 2",src:"./assets/rdr2.jpg"},{name:"Breath of the Wild",src:"./assets/zelda.jpg"},{name:"Fortnite",src:"./assets/fortnite.jpg"},{name:"Cyberpunk 2077",src:"./assets/cyberpunk.jpg"},{name:"Minecraft",src:"./assets/minecraft.jpg"},{name:"Assassin's Creed Valhalla",src:"./assets/ac.jpg"},{name:"The Witcher 3",src:"./assets/thewitcher3.jpg"},{name:"Overwatch",src:"./assets/overwatch.jpg"},{name:"Super Mario Odyssey",src:"./assets/spmario.jpg"}];console.log(R);const g=document.getElementById("image"),d=document.getElementById("canvas"),i=d.getContext("2d");let b,f,m=parseInt(localStorage.getItem("score"))||0;document.getElementById("score");i.willReadFrequently=!0;let u=40;function B(e,s,r){s.width=e.width,s.height=e.height,i.drawImage(e,0,0,e.width,e.height,0,0,s.width,s.height);for(let c=0;c<s.height;c+=r)for(let t=0;t<s.width;t+=r){const n=i.getImageData(t,c,r,r),o=n.data;let I=0,j=0,w=0;for(let a=0;a<o.length;a+=4)I+=o[a],j+=o[a+1],w+=o[a+2];const h=r*r,E=Math.round(I/h),x=Math.round(j/h),v=Math.round(w/h);for(let a=0;a<o.length;a+=4)o[a]=E,o[a+1]=x,o[a+2]=v;i.putImageData(n,t,c)}}function O(e){return Array.isArray(e)&&e.length>0?Math.floor(Math.random()*e.length):(console.error("Le tableau de données est vide ou n'est pas un tableau."),null)}function p(){const e=O(f);if(e!==null){const r=f[e].src;g.src=r,u=40,i.clearRect(0,0,d.width,d.height),g.onload=function(){B(g,d,u)},b=e}}fetch("./assets/gameIndex.json").then(e=>e.json()).then(e=>{f=e,p()}).catch(e=>{console.error("Erreur de chargement du fichier JSON : "+e)});let l=0;const L=4;function M(){const e=document.getElementById("answer"),r=f[b].name.toUpperCase();if(e.style.border="",e.value.toUpperCase()===r){console.log("Réponse correcte !");const c=document.getElementById("messageBox");c.style.display="block",setTimeout(function(){c.style.display="none",l=0,e.value=""},1e3);const t=m+u;y(t),p(),l=0,e.value=""}else console.log("Réponse incorrecte. Essayez encore."),l++,e.style.border="2px solid red",l>=L?(p(),l=0,e.style.border=""):(u-=10,B(g,d,u))}function y(e){m=e;const s=document.getElementById("score");s.innerText=`Score : ${m}`,localStorage.setItem("score",m)}const A=document.getElementById("reset-btn");A.addEventListener("click",()=>{D()});function D(){y(0)}const S=document.getElementById("submit-btn");S.addEventListener("click",M);p();y(m);
