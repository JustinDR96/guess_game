(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const O=[{name:"the finals",src:"./assets/the_finals.jpg"},{name:"mario kart 8",src:"./assets/mario_kart_8.jpg"},{name:"warzone",src:"./assets/warzone.jpg"},{name:"final fantasy VII",src:"./assets/ff7.jpg"},{name:"project cars 3",src:"./assets/project_cars_3.jpg"},{name:"Doom Eternal",src:"./assets/doom_eternal.jpg"},{name:"sonic",src:"./assets/sonic.jpg"},{name:"battlefield 3",src:"./assets/bf3.jpg"},{name:"Fc 24",src:"./assets/fc24.jpg"},{name:"celeste",src:"./assets/celeste.jpg"},{name:"Red Dead Redemption 2",src:"./assets/rdr2.jpg"},{name:"Breath of the Wild",src:"./assets/zelda.jpg"},{name:"Fortnite",src:"./assets/fortnite.jpg"},{name:"Cyberpunk 2077",src:"./assets/cyberpunk.jpg"},{name:"Minecraft",src:"./assets/minecraft.jpg"},{name:"Assassin's Creed Valhalla",src:"./assets/ac.jpg"},{name:"The Witcher 3",src:"./assets/thewitcher3.jpg"},{name:"Overwatch",src:"./assets/overwatch.jpg"},{name:"Super Mario Odyssey",src:"./assets/spmario.jpg"}];console.log(O);const g=document.getElementById("image"),d=document.getElementById("canvas"),i=d.getContext("2d");let B,f,m=parseInt(localStorage.getItem("score"))||0;document.getElementById("score");i.willReadFrequently=!0;let u=40;function E(e,s,n){s.width=e.width,s.height=e.height,i.drawImage(e,0,0,e.width,e.height,0,0,s.width,s.height);for(let o=0;o<s.height;o+=n)for(let t=0;t<s.width;t+=n){const r=i.getImageData(t,o,n,n),a=r.data;let j=0,b=0,w=0;for(let c=0;c<a.length;c+=4)j+=a[c],b+=a[c+1],w+=a[c+2];const p=n*n,x=Math.round(j/p),v=Math.round(b/p),R=Math.round(w/p);for(let c=0;c<a.length;c+=4)a[c]=x,a[c+1]=v,a[c+2]=R;i.putImageData(r,t,o)}}const y=[];function L(e){if(Array.isArray(e)&&e.length>0){const s=e.map((o,t)=>t).filter(o=>!y.includes(o));s.length===0&&(y.length=0);const n=s[Math.floor(Math.random()*s.length)];return y.push(n),n}else return console.error("Le tableau de données est vide ou n'est pas un tableau."),null}function h(){const e=L(f);if(e!==null){const n=f[e].src;g.src=n,u=40,i.clearRect(0,0,d.width,d.height),g.onload=function(){E(g,d,u)},B=e}}fetch("./assets/gameIndex.json").then(e=>e.json()).then(e=>{f=e,h()}).catch(e=>{console.error("Erreur de chargement du fichier JSON : "+e)});let l=0;const M=4;function A(){const e=document.getElementById("answer"),n=f[B].name.toUpperCase();if(e.style.border="",e.value.toUpperCase()===n){console.log("Réponse correcte !");const o=document.getElementById("messageBox");o.style.display="block",setTimeout(function(){o.style.display="none",l=0,e.value=""},1e3);const t=m+u;I(t),h(),l=0,e.value=""}else console.log("Réponse incorrecte. Essayez encore."),l++,e.style.border="2px solid red",l>=M?(h(),l=0,e.style.border=""):(u-=10,E(g,d,u))}function I(e){m=e;const s=document.getElementById("score");s.innerText=`Score : ${m}`,localStorage.setItem("score",m)}const _=document.getElementById("reset-btn");_.addEventListener("click",()=>{D()});function D(){I(0)}const S=document.getElementById("submit-btn");S.addEventListener("click",A);h();I(m);
